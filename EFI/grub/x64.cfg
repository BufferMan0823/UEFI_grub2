insmod gfxmenu
insmod gfxterm
insmod gfxterm_menu
insmod gfxterm_background

set menu_color_normal=white/black
set menu_color_highlight=black/light-gray
set background_color=44,0,30,0 
clear

set gfxmode=auto
set default=0

set timeout_style=menu

set timeout=15

insmod part_gpt

menuentry "start win8 pe" --class windows --class os {
	set root='(hd0,msdos1)'
	echo "Start Windows"
	chainloader /EFI/Boot/win8pe.efi
}

menuentry "start windows" --class windows --class os {
	insmod ntfs
	set efifile=/EFI/Microsoft/Boot/bootmgfw.efi
	search.file $efifile root
	echo "Start Windows"
	chainloader $efifile}

menuentry "start ubuntu" --class ubuntu --class os {
	insmod ext2
	set root='(hd0,gpt5)'
	linux /vmlinuz ro root=/dev/sda5
	initrd /initrd.img
	echo "Start Ubuntu 16.04"
}

menuentry "ubuntu-efi" --class ubuntu --class os {
	insmod ext2
	set root='(hd0,gpt5)'
	chainloader /efi/grub.efi
}

menuentry "-------------------" --class ubuntu --class os{
	set root=(hd0,gpt1)
}

menuentry "install ubuntu" --class ubuntu --class os {
	insmod ext2
	insmod loopback

	set isofile=/OS/linux/ubuntu/ubuntu-16.04.2-desktop-amd64.iso	search.file $isofile root

	loopback loop $isofile
	linux	(loop)/casper/vmlinuz.efi  boot=casper iso-scan/filename=$isofile
	initrd	(loop)/casper/initrd.lz
}

menuentry "-------------------" --class ubuntu --class os{
	set root=(hd0,gpt1)
}

menuentry "reboot" --class windows --class os{
	insmod reboot
	reboot
}

menuentry "halt" --class windows --class os{
	insmod halt
	halt
}
